<script lang="ts">
	import { validate_store } from 'svelte/internal';

	let goomba: { x: number; y: number }[] = [];

	const addGoomba = () => {
		goomba = [...goomba, { x, y: 0 }];
		console.log(goomba);
	};

	let x: number = 0;
	let y: number;

	const rangeWidth = 1000;
	const range: number[] = [];
	for (let i = 0; i < rangeWidth; i++) {
		range.push(i - rangeWidth / 2);
	}
	for (let i = rangeWidth; i > 0; i--) {
		range.push(i - rangeWidth / 2);
	}

	// cycle x back and forth
	const cycleX = (i: number) => {
		x = range[i];
		setTimeout(() => cycleX((i + 5) % range.length), 1);
	};

	const cycleY = () => {
		goomba.map((val) => {
			if (val.y < 400) val.y = val.y + 5;
		});
		goomba = goomba;
		setTimeout(cycleY, 1);
	};

	cycleX(0);
	cycleY();
</script>

<h1>GOOMBA STACK!!!</h1>

<button on:click={addGoomba}>Add Goomba</button>

<svelte:window bind:scrollY={y} />

<div class="goomba">
	<img
		src="/goomeba.png"
		width="100"
		height="100"
		alt="goomba"
		style:transform="translateX({x}px)"
	/>

	{#key goomba}
		{#each goomba as gomba}
			<img
				src="/goomeba.png"
				width="100"
				height="100"
				alt="gomba"
				style:transform="translateY({gomba.y}px) translateX({gomba.x}px)"
			/>
		{/each}
	{/key}
</div>

<style>
	img {
		display: block;
		z-index: 100000000;
		transform: translate3d(0, 0, 10000000);
		margin: -16px;
	}

	:global(body) {
		display: flex;
		align-items: center;
		justify-content: center;
		background-color: green;
		background: url('data:image/jpeg;base64,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');
		background-size: 100%;
	}

	.goomba {
		display: flex;
		height: 80vh;
		flex-flow: column;
		align-items: center;
	}
</style>
